{"version":3,"sources":["../../source/server/locals.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQA,MAAM,YAAY,wBAAS,GAAT,uBAAyB,GAAzB,uBAAyC,EAAC,UAAU,QAAV,EAA1C,CAAZ;AACN,MAAM,SAAS,wBAAS,GAAT,sBAAT;;kBAES,cAAK,WAAW,KAAX,EAAkB;AACpC,QAAM,KAAK,MAAM,kBAAS,gBAAK,SAAL,EAAgB,eAAhB,EAAiC,KAAjC,CAAT,EAAkD,MAAlD,CAAN,CADyB;AAEpC,QAAM,UAAU,UAAU,OAAV,CAAkB,EAAlB,EAAsB,EAAC,KAAK,IAAL,EAAvB,CAAV,CAF8B;AAGpC,QAAM,SAAS,sBAAS,OAAO,KAAP,CAAa,EAAb,EAAiB,QAAjB,CAA0B,CAA1B,EAA6B,KAA7B,CAAlB,CAH8B;AAIpC,SAAO,EAAE,MAAF,EAAU,OAAV,EAAP,CAJoC;CAAlB","file":"locals.js","sourcesContent":["import { join } from 'path';\nimport { wrap } from 'co';\nimport { readFile } from 'mz/fs';\nimport remark from 'remark';\nimport remarkHtml from 'remark-html';\nimport remarkYaml from 'remark-yaml';\nimport { safeLoad } from 'js-yaml';\n\nconst processor = remark().use(remarkYaml).use(remarkHtml, {entities: 'escape'});\nconst parser = remark().use(remarkYaml);\n\nexport default wrap(function *(fpath) {\n  const md = yield readFile(join(__dirname, '../../content', fpath), 'utf8');\n  const article = processor.process(md, {gfm: true});\n  const config = safeLoad(parser.parse(md).children[0].value);\n  return { config, article };\n});\n"]}