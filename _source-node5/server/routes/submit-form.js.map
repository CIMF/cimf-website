{"version":3,"sources":["../../../source/server/routes/submit-form.js"],"names":[],"mappings":";;;;;;kBAQe,aAAa;AAC1B,QAAM,OAAO,KAAK,OAAL,CAAa,IAA1B;;AAEA,QAAM,OAAO;AACX,UAAM,KAAK,KADA;AAEX,QAAI,kBAFO;AAGX,aAAS,CAAC,0BAAD,GAA6B,KAAK,KAAlC,EAAwC,CAAxC,CAHE;AAIX,UAAM,KAAK;AAJA,GAAb;;AAOA,QAAM,4BAAc,IAAD,IAAU;AAC3B,WAAO,QAAP,GAAkB,IAAlB,CAAuB,IAAvB,EAA6B,IAA7B;AACD,GAFK,CAAN;;AAIA,OAAK,QAAL,CAAc,MAAd;AACD,C;;AAvBD;;;;AACA;;AACA;;;;;;AAEA,MAAM,qBAAqB,iBAAO,GAAP,CAAW,yBAAX,CAA3B;;AAEA,MAAM,SAAS,yBAAQ,iBAAO,GAAP,CAAW,SAAX,CAAR,CAAf","file":"submit-form.js","sourcesContent":["import config from 'config';\nimport { fromCallback } from 'bluebird';\nimport mailgun from 'mailgun-js';\n\nconst contactFormReceive = config.get('mail.contactFormReceive');\n\nconst mailer = mailgun(config.get('mailgun'));\n\nexport default function *() {\n  const body = this.request.body;\n\n  const data = {\n    from: body.email,\n    to: contactFormReceive,\n    subject: `Contact Form Submit (from ${body.email})`,\n    text: body.message,\n  };\n\n  yield fromCallback((done) => {\n    mailer.messages().send(data, done);\n  });\n\n  this.redirect('back');\n}\n"]}