{"version":3,"sources":["../../../source/server/routes/submit-form.js"],"names":[],"mappings":";;;;;;kBAQe,aAAa;AAC1B,QAAM,OAAO,KAAK,OAAL,CAAa,IAAb,CADa;;AAG1B,QAAM,OAAO;AACX,UAAM,KAAK,KAAL;AACN,QAAI,kBAAJ;AACA,aAAS,CAAC,0BAAD,GAA6B,KAAK,KAAL,EAAW,CAAxC,CAAT;AACA,UAAM,KAAK,OAAL;GAJF,CAHoB;;AAU1B,QAAM,4BAAa,QAAU;AAC3B,WAAO,QAAP,GAAkB,IAAlB,CAAuB,IAAvB,EAA6B,IAA7B,EAD2B;GAAV,CAAnB,CAV0B;;AAc1B,OAAK,QAAL,CAAc,MAAd,EAd0B;CAAb;;;;;;;;;;;;;;AAJf,MAAM,qBAAqB,iBAAO,GAAP,CAAW,yBAAX,CAArB;;AAEN,MAAM,SAAS,yBAAQ,iBAAO,GAAP,CAAW,SAAX,CAAR,CAAT","file":"submit-form.js","sourcesContent":["import config from 'config';\nimport { fromCallback } from 'bluebird';\nimport mailgun from 'mailgun-js';\n\nconst contactFormReceive = config.get('mail.contactFormReceive');\n\nconst mailer = mailgun(config.get('mailgun'));\n\nexport default function *() {\n  const body = this.request.body;\n\n  const data = {\n    from: body.email,\n    to: contactFormReceive,\n    subject: `Contact Form Submit (from ${body.email})`,\n    text: body.message,\n  };\n\n  yield fromCallback((done) => {\n    mailer.messages().send(data, done);\n  });\n\n  this.redirect('back');\n}\n"]}